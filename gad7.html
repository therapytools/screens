<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GAD-7 Anxiety Severity Calculator</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    line-height: 1.6;
    margin: 20px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
  .question-container {
    margin-bottom: 20px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
  }
  .question-text {
    font-weight: bold;
    margin-bottom: 5px;
  }
  .options label {
    display: block;
    margin-bottom: 5px;
    cursor: pointer;
  }
  #score-display {
    margin-top: 20px;
    padding: 15px;
    background-color: #f2f2f2;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
  }
  #note-container {
    margin-top: 20px;
  }
  textarea {
    width: 100%;
    height: 250px;
    font-family: monospace;
    font-size: 1em;
  }
  .copy-button {
    display: block;
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    font-size: 1em;
    cursor: pointer;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
  }
  .copy-button:hover {
    background-color: #0056b3;
  }
</style>
</head>
<body>

<h1>GAD-7 Anxiety Severity Calculator</h1>

<p>Over the last 2 weeks, how often have you been bothered by any of the following problems?</p>

<form id="gad-7-form">
  <div class="question-container">
    <p class="question-text">1. Feeling nervous, anxious, or on edge</p>
    <div class="options">
      <label><input type="radio" name="q1" value="0"> Not at all</label>
      <label><input type="radio" name="q1" value="1"> Several days</label>
      <label><input type="radio" name="q1" value="2"> More than half the days</label>
      <label><input type="radio" name="q1" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">2. Not being able to stop or control worrying</p>
    <div class="options">
      <label><input type="radio" name="q2" value="0"> Not at all</label>
      <label><input type="radio" name="q2" value="1"> Several days</label>
      <label><input type="radio" name="q2" value="2"> More than half the days</label>
      <label><input type="radio" name="q2" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">3. Worrying too much about different things</p>
    <div class="options">
      <label><input type="radio" name="q3" value="0"> Not at all</label>
      <label><input type="radio" name="q3" value="1"> Several days</label>
      <label><input type="radio" name="q3" value="2"> More than half the days</label>
      <label><input type="radio" name="q3" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">4. Trouble relaxing</p>
    <div class="options">
      <label><input type="radio" name="q4" value="0"> Not at all</label>
      <label><input type="radio" name="q4" value="1"> Several days</label>
      <label><input type="radio" name="q4" value="2"> More than half the days</label>
      <label><input type="radio" name="q4" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">5. Being so restless that it is hard to sit still</p>
    <div class="options">
      <label><input type="radio" name="q5" value="0"> Not at all</label>
      <label><input type="radio" name="q5" value="1"> Several days</label>
      <label><input type="radio" name="q5" value="2"> More than half the days</label>
      <label><input type="radio" name="q5" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">6. Becoming easily annoyed or irritable</p>
    <div class="options">
      <label><input type="radio" name="q6" value="0"> Not at all</label>
      <label><input type="radio" name="q6" value="1"> Several days</label>
      <label><input type="radio" name="q6" value="2"> More than half the days</label>
      <label><input type="radio" name="q6" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">7. Feeling afraid as if something awful might happen</p>
    <div class="options">
      <label><input type="radio" name="q7" value="0"> Not at all</label>
      <label><input type="radio" name="q7" value="1"> Several days</label>
      <label><input type="radio" name="q7" value="2"> More than half the days</label>
      <label><input type="radio" name="q7" value="3"> Nearly every day</label>
    </div>
  </div>

  <hr>

  <div class="question-container">
    <p class="question-text">8. If you checked off any problems, how difficult have these problems made it for you to do your work, take care of things at home, or get along with other people?</p>
    <div class="options">
      <label><input type="radio" name="q8" value="0"> Not difficult at all</label>
      <label><input type="radio" name="q8" value="1"> Somewhat difficult</label>
      <label><input type="radio" name="q8" value="2"> Very difficult</label>
      <label><input type="radio" name="q8" value="3"> Extremely difficult</label>
    </div>
  </div>

</form>

<div id="score-display">Total Score: 0 (No symptoms selected)</div>

<div id="note-container">
  <h2>Notes for EMR</h2>
  <textarea id="note-output" readonly>Fill out the form above to generate the note.</textarea>
  <button class="copy-button" onclick="copyToClipboard()">Copy to Clipboard</button>
</div>

<script>
  const form = document.getElementById('gad-7-form');
  const scoreDisplay = document.getElementById('score-display');
  const noteOutput = document.getElementById('note-output');

  const questionTexts = [
    "1. Feeling nervous, anxious, or on edge",
    "2. Not being able to stop or control worrying",
    "3. Worrying too much about different things",
    "4. Trouble relaxing",
    "5. Being so restless that it is hard to sit still",
    "6. Becoming easily annoyed or irritable",
    "7. Feeling afraid as if something awful might happen"
  ];

  form.addEventListener('change', updateResults);

  function updateResults() {
    let score = 0;
    let noteText = "GAD-7 administered. Patient reports the following symptoms over the last 2 weeks:\n\n";
    let allScoringQuestionsAnswered = true;

    for (let i = 1; i <= 7; i++) {
      const questionName = 'q' + i;
      const selectedOption = form.querySelector(`input[name="${questionName}"]:checked`);
      
      if (selectedOption) {
        const value = parseInt(selectedOption.value);
        const answerText = selectedOption.parentElement.textContent.trim();
        score += value;
        noteText += `${questionTexts[i-1]}: ${answerText} (${value} pt)\n`;
      } else {
        allScoringQuestionsAnswered = false;
        noteText += `${questionTexts[i-1]}: Not answered\n`;
      }
    }

    let interpretation = '';
    if (score >= 0 && score <= 4) {
      interpretation = 'Minimal anxiety';
    } else if (score >= 5 && score <= 9) {
      interpretation = 'Mild anxiety';
    } else if (score >= 10 && score <= 14) {
      interpretation = 'Moderate anxiety';
    } else if (score >= 15 && score <= 21) {
        interpretation = 'Severe anxiety';
    }

    noteText += `\nTOTAL SCORE: ${score} (${interpretation})\n`;

    if (!allScoringQuestionsAnswered) {
        noteText += "(Note: Score is provisional as not all questions were answered.)\n";
        scoreDisplay.innerText = `Total Score: ${score} (Incomplete)`;
    } else {
        scoreDisplay.innerText = `Total Score: ${score} (${interpretation})`;
    }

    // Handle functional impairment question
    const q8_selected = form.querySelector('input[name="q8"]:checked');
    if (q8_selected) {
        const q8_text = q8_selected.parentElement.textContent.trim();
        noteText += `\nFunctional Impairment: When asked how difficult these problems have made it to do work, take care of things at home, or get along with people, the patient reported it has been "${q8_text}".`;
    } else {
        noteText += "\nFunctional Impairment: Not assessed.";
    }

    noteOutput.value = noteText;
  }
  
  function copyToClipboard() {
    const noteText = document.getElementById('note-output');
    noteText.select();
    document.execCommand('copy');
    alert('Note copied to clipboard!');
  }

</script>

</body>
</html>
