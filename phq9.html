<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PHQ-9 Depression Severity Calculator</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    line-height: 1.6;
    margin: 20px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
  .question-container {
    margin-bottom: 20px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
  }
  .question-text {
    font-weight: bold;
    margin-bottom: 5px;
  }
  .options label {
    display: block;
    margin-bottom: 5px;
    cursor: pointer;
  }
  #score-display {
    margin-top: 20px;
    padding: 15px;
    background-color: #f2f2f2;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
  }
  #note-container {
    margin-top: 20px;
  }
  textarea {
    width: 100%;
    height: 250px;
    font-family: monospace;
    font-size: 1em;
  }
  .copy-button {
    display: block;
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    font-size: 1em;
    cursor: pointer;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
  }
  .copy-button:hover {
    background-color: #0056b3;
  }
</style>
</head>
<body>

<h1>PHQ-9 Depression Severity Calculator</h1>

<p>Over the last 2 weeks, how often have you been bothered by any of the following problems?</p>

<form id="phq-9-form">
  <div class="question-container">
    <p class="question-text">1. Little interest or pleasure in doing things</p>
    <div class="options">
      <label><input type="radio" name="q1" value="0"> Not at all</label>
      <label><input type="radio" name="q1" value="1"> Several days</label>
      <label><input type="radio" name="q1" value="2"> More than half the days</label>
      <label><input type="radio" name="q1" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">2. Feeling down, depressed, or hopeless</p>
    <div class="options">
      <label><input type="radio" name="q2" value="0"> Not at all</label>
      <label><input type="radio" name="q2" value="1"> Several days</label>
      <label><input type="radio" name="q2" value="2"> More than half the days</label>
      <label><input type="radio" name="q2" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">3. Trouble falling or staying asleep, or sleeping too much</p>
    <div class="options">
      <label><input type="radio" name="q3" value="0"> Not at all</label>
      <label><input type="radio" name="q3" value="1"> Several days</label>
      <label><input type="radio" name="q3" value="2"> More than half the days</label>
      <label><input type="radio" name="q3" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">4. Feeling tired or having little energy</p>
    <div class="options">
      <label><input type="radio" name="q4" value="0"> Not at all</label>
      <label><input type="radio" name="q4" value="1"> Several days</label>
      <label><input type="radio" name="q4" value="2"> More than half the days</label>
      <label><input type="radio" name="q4" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">5. Poor appetite or overeating</p>
    <div class="options">
      <label><input type="radio" name="q5" value="0"> Not at all</label>
      <label><input type="radio" name="q5" value="1"> Several days</label>
      <label><input type="radio" name="q5" value="2"> More than half the days</label>
      <label><input type="radio" name="q5" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">6. Feeling bad about yourself - or that you are a failure or have let yourself or your family down</p>
    <div class="options">
      <label><input type="radio" name="q6" value="0"> Not at all</label>
      <label><input type="radio" name="q6" value="1"> Several days</label>
      <label><input type="radio" name="q6" value="2"> More than half the days</label>
      <label><input type="radio" name="q6" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">7. Trouble concentrating on things, such as reading the newspaper or watching television</p>
    <div class="options">
      <label><input type="radio" name="q7" value="0"> Not at all</label>
      <label><input type="radio" name="q7" value="1"> Several days</label>
      <label><input type="radio" name="q7" value="2"> More than half the days</label>
      <label><input type="radio" name="q7" value="3"> Nearly every day</label>
    </div>
  </div>

  <div class="question-container">
    <p class="question-text">8. Moving or speaking so slowly that other people could have noticed? Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual</p>
    <div class="options">
      <label><input type="radio" name="q8" value="0"> Not at all</label>
      <label><input type="radio" name="q8" value="1"> Several days</label>
      <label><input type="radio" name="q8" value="2"> More than half the days</label>
      <label><input type="radio" name="q8" value="3"> Nearly every day</label>
    </div>
  </div>

    <div class="question-container">
    <p class="question-text">9. Thoughts that you would be better off dead or of hurting yourself in some way</p>
    <div class="options">
      <label><input type="radio" name="q9" value="0"> Not at all</label>
      <label><input type="radio" name="q9" value="1"> Several days</label>
      <label><input type="radio" name="q9" value="2"> More than half the days</label>
      <label><input type="radio" name="q9" value="3"> Nearly every day</label>
    </div>
  </div>
  
  <hr>

  <div class="question-container">
    <p class="question-text">10. If you checked off any problems, how difficult have these problems made it for you to do your work, take care of things at home, or get along with other people?</p>
    <div class="options">
      <label><input type="radio" name="q10" value="0"> Not difficult at all</label>
      <label><input type="radio" name="q10" value="1"> Somewhat difficult</label>
      <label><input type="radio" name="q10" value="2"> Very difficult</label>
      <label><input type="radio" name="q10" value="3"> Extremely difficult</label>
    </div>
  </div>

</form>

<div id="score-display">Total Score: 0 (No symptoms selected)</div>

<div id="note-container">
  <h2>Notes for EMR</h2>
  <textarea id="note-output" readonly>Fill out the form above to generate the note.</textarea>
  <button class="copy-button" onclick="copyToClipboard()">Copy to Clipboard</button>
</div>

<script>
  const form = document.getElementById('phq-9-form');
  const scoreDisplay = document.getElementById('score-display');
  const noteOutput = document.getElementById('note-output');

  const questionTexts = [
    "1. Little interest or pleasure in doing things",
    "2. Feeling down, depressed, or hopeless",
    "3. Trouble falling/staying asleep, or sleeping too much",
    "4. Feeling tired or having little energy",
    "5. Poor appetite or overeating",
    "6. Feeling bad about self, feeling like a failure",
    "7. Trouble concentrating on things",
    "8. Moving/speaking slowly or being fidgety/restless",
    "9. Thoughts of being better off dead or self-harm"
  ];

  form.addEventListener('change', updateResults);

  function updateResults() {
    let score = 0;
    let noteText = "PHQ-9 administered. Patient reports the following symptoms over the last 2 weeks:\n\n";
    let allScoringQuestionsAnswered = true;

    for (let i = 1; i <= 9; i++) {
      const questionName = 'q' + i;
      const selectedOption = form.querySelector(`input[name="${questionName}"]:checked`);
      
      if (selectedOption) {
        const value = parseInt(selectedOption.value);
        const answerText = selectedOption.parentElement.textContent.trim();
        score += value;
        noteText += `${questionTexts[i-1]}: ${answerText} (${value} pt)\n`;
      } else {
        allScoringQuestionsAnswered = false;
        noteText += `${questionTexts[i-1]}: Not answered\n`;
      }
    }

    let interpretation = '';
    if (score >= 0 && score <= 4) {
      interpretation = 'Minimal depression';
    } else if (score >= 5 && score <= 9) {
      interpretation = 'Mild depression';
    } else if (score >= 10 && score <= 14) {
      interpretation = 'Moderate depression';
    } else if (score >= 15 && score <= 19) {
      interpretation = 'Moderately severe depression';
    } else if (score >= 20 && score <= 27) {
        interpretation = 'Severe depression';
    }

    noteText += `\nTOTAL SCORE: ${score} (${interpretation})\n`;

    if (!allScoringQuestionsAnswered) {
        noteText += "(Note: Score is provisional as not all questions were answered.)\n";
        scoreDisplay.innerText = `Total Score: ${score} (Incomplete)`;
    } else {
        scoreDisplay.innerText = `Total Score: ${score} (${interpretation})`;
    }

    // Handle question 10 (functional impairment)
    const q10_selected = form.querySelector('input[name="q10"]:checked');
    if (q10_selected) {
        const q10_text = q10_selected.parentElement.textContent.trim();
        noteText += `\nFunctional Impairment: When asked how difficult these problems have made it to do work, take care of things at home, or get along with people, the patient reported it has been "${q10_text}".`;
    } else {
        noteText += "\nFunctional Impairment: Not assessed.";
    }

    noteOutput.value = noteText;
  }
  
  function copyToClipboard() {
    const noteText = document.getElementById('note-output');
    noteText.select();
    document.execCommand('copy');
    alert('Note copied to clipboard!');
  }

</script>

</body>
</html>
