<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C-SSRS Fillable Risk Assessment Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom focus ring for accessibility */
        input:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
    <div class="w-full max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-8 md:p-10 space-y-8">
        <!-- Header Section -->
        <div>
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 text-center">Columbia-Suicide Severity Rating Scale (C-SSRS)</h1>
            <p class="text-sm text-gray-500 text-center mt-2">Screen Version - Recent</p>
        </div>

        <!-- Form Section -->
        <form id="csrsForm" class="space-y-8">
            <!-- Part 1: Suicidal Ideation -->
            <fieldset class="space-y-6">
                <legend class="text-xl font-semibold text-gray-700 border-b pb-2 w-full">Part 1: Suicidal Ideation</legend>
                <p class="text-sm text-gray-600">Ask questions 1 and 2. Questions marked with an asterisk (<span class="text-red-500 font-bold">*</span>) indicate high risk.</p>
                
                <!-- Question 1 -->
                <div class="p-4 border border-gray-200 rounded-lg">
                    <p class="font-medium text-gray-800">1. Have you wished you were dead or wished you could go to sleep and not wake up?</p>
                    <div class="mt-3 flex items-center space-x-6">
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q1" value="Yes" class="h-4 w-4 text-blue-600 border-gray-300"> <span>Yes</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q1" value="No" class="h-4 w-4 text-blue-600 border-gray-300" checked> <span>No</span></label>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="p-4 border border-gray-200 rounded-lg">
                    <p class="font-medium text-gray-800">2. Have you actually had any thoughts of killing yourself?</p>
                    <div class="mt-3 flex items-center space-x-6">
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q2" value="Yes" class="h-4 w-4 text-blue-600 border-gray-300"> <span>Yes</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q2" value="No" class="h-4 w-4 text-blue-600 border-gray-300" checked> <span>No</span></label>
                    </div>
                </div>

                <!-- Conditional Questions 3, 4, 5 -->
                <div id="conditional-ideation" class="hidden space-y-6 pl-4 border-l-4 border-blue-200">
                     <p class="text-sm text-gray-600 font-medium">Since you answered "Yes" to question 2, please ask questions 3, 4, and 5.</p>
                    <!-- Question 3 -->
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <p class="font-medium text-gray-800">3. Have you been thinking about how you might do this?</p>
                        <div class="mt-3 flex items-center space-x-6">
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q3" value="Yes" class="h-4 w-4 text-blue-600 border-gray-300"> <span>Yes</span></label>
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q3" value="No" class="h-4 w-4 text-blue-600 border-gray-300" checked> <span>No</span></label>
                        </div>
                    </div>

                    <!-- Question 4 -->
                    <div class="p-4 border border-red-200 bg-red-50 rounded-lg">
                        <p class="font-medium text-gray-800">4. Have you had these thoughts and had some intention of acting on them? <span class="text-red-500 font-bold">*</span></p>
                        <div class="mt-3 flex items-center space-x-6">
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q4" value="Yes" class="h-4 w-4 text-red-600 border-gray-300"> <span>Yes</span></label>
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q4" value="No" class="h-4 w-4 text-red-600 border-gray-300" checked> <span>No</span></label>
                        </div>
                    </div>

                    <!-- Question 5 -->
                    <div class="p-4 border border-red-200 bg-red-50 rounded-lg">
                        <p class="font-medium text-gray-800">5. Have you started to work out or worked out the details of how to kill yourself? Do you intend to carry out this plan? <span class="text-red-500 font-bold">*</span></p>
                        <div class="mt-3 flex items-center space-x-6">
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q5" value="Yes" class="h-4 w-4 text-red-600 border-gray-300"> <span>Yes</span></label>
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q5" value="No" class="h-4 w-4 text-red-600 border-gray-300" checked> <span>No</span></label>
                        </div>
                    </div>
                </div>
            </fieldset>

            <!-- Part 2: Suicidal Behavior -->
            <fieldset class="space-y-6">
                <legend class="text-xl font-semibold text-gray-700 border-b pb-2 w-full">Part 2: Suicidal Behavior</legend>
                <p class="text-sm text-gray-600">Always ask question 6.</p>

                <!-- Question 6 -->
                <div class="p-4 border border-red-200 bg-red-50 rounded-lg">
                    <p class="font-medium text-gray-800">6. Have you ever done anything, started to do anything, or prepared to do anything to end your life? <span class="text-red-500 font-bold">*</span></p>
                    <div class="mt-3 flex items-center space-x-6">
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q6" value="Yes" class="h-4 w-4 text-red-600 border-gray-300"> <span>Yes</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q6" value="No" class="h-4 w-4 text-red-600 border-gray-300" checked> <span>No</span></label>
                    </div>
                </div>

                <!-- Conditional Follow-up for Q6 -->
                <div id="conditional-behavior" class="hidden pl-4 border-l-4 border-red-200">
                    <div class="p-4 border border-red-200 rounded-lg">
                        <p class="font-medium text-gray-800">If YES, was this within the past 3 months? <span class="text-red-500 font-bold">*</span></p>
                        <div class="mt-3 flex items-center space-x-6">
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q6_followup" value="Yes" class="h-4 w-4 text-red-600 border-gray-300"> <span>Yes</span></label>
                            <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="q6_followup" value="No" class="h-4 w-4 text-red-600 border-gray-300" checked> <span>No</span></label>
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>

        <!-- Risk Level Indicator -->
        <div id="risk-level-indicator" class="p-4 rounded-lg text-center transition-all duration-300">
            <h3 class="text-lg font-bold">Risk Level: <span id="risk-level-text">Not Assessed</span></h3>
        </div>

        <!-- Copiable Output -->
        <div class="space-y-3">
            <h2 class="text-xl font-semibold text-gray-700">Assessment Summary</h2>
            <textarea id="output" readonly class="w-full h-48 p-3 bg-gray-50 border border-gray-300 rounded-lg text-sm text-gray-700 focus:ring-2 focus:ring-blue-500 resize-none"></textarea>
            <button id="copyButton" class="w-full sm:w-auto px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
                Copy to Clipboard
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('csrsForm');
            const conditionalIdeation = document.getElementById('conditional-ideation');
            const conditionalBehavior = document.getElementById('conditional-behavior');
            const riskIndicator = document.getElementById('risk-level-indicator');
            const riskText = document.getElementById('risk-level-text');
            const outputArea = document.getElementById('output');
            const copyButton = document.getElementById('copyButton');

            // --- Event Listeners ---
            form.addEventListener('change', updateRiskLevelAndOutput);
            
            // Show/hide conditional questions
            const q2Radios = document.querySelectorAll('input[name="q2"]');
            q2Radios.forEach(radio => radio.addEventListener('change', () => {
                if (document.querySelector('input[name="q2"]:checked').value === 'Yes') {
                    conditionalIdeation.classList.remove('hidden');
                } else {
                    conditionalIdeation.classList.add('hidden');
                    // Reset conditional answers when hidden
                    document.querySelectorAll('#conditional-ideation input[type="radio"]').forEach(r => {
                        if (r.value === 'No') r.checked = true;
                    });
                }
            }));
            
            const q6Radios = document.querySelectorAll('input[name="q6"]');
            q6Radios.forEach(radio => radio.addEventListener('change', () => {
                 if (document.querySelector('input[name="q6"]:checked').value === 'Yes') {
                    conditionalBehavior.classList.remove('hidden');
                } else {
                    conditionalBehavior.classList.add('hidden');
                    // Reset conditional answers when hidden
                    document.querySelector('input[name="q6_followup"][value="No"]').checked = true;
                }
            }));

            copyButton.addEventListener('click', () => {
                outputArea.select();
                // Use execCommand for broader compatibility within iframe environments
                try {
                    document.execCommand('copy');
                    copyButton.textContent = 'Copied!';
                    setTimeout(() => {
                        copyButton.textContent = 'Copy to Clipboard';
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                    copyButton.textContent = 'Copy Failed';
                     setTimeout(() => {
                        copyButton.textContent = 'Copy to Clipboard';
                    }, 2000);
                }
            });

            // --- Core Logic Function ---
            function updateRiskLevelAndOutput() {
                const values = {
                    q1: document.querySelector('input[name="q1"]:checked').value,
                    q2: document.querySelector('input[name="q2"]:checked').value,
                    q3: 'N/A',
                    q4: 'N/A',
                    q5: 'N/A',
                    q6: document.querySelector('input[name="q6"]:checked').value,
                    q6_followup: 'N/A'
                };
                
                if (values.q2 === 'Yes') {
                    values.q3 = document.querySelector('input[name="q3"]:checked').value;
                    values.q4 = document.querySelector('input[name="q4"]:checked').value;
                    values.q5 = document.querySelector('input[name="q5"]:checked').value;
                }

                if (values.q6 === 'Yes') {
                    values.q6_followup = document.querySelector('input[name="q6_followup"]:checked').value;
                }

                // Determine risk level
                let riskLevel = 'Not Assessed';
                let riskColorClasses = ['bg-gray-200', 'text-gray-800'];

                const isHighRisk = (values.q4 === 'Yes' || values.q5 === 'Yes' || values.q6_followup === 'Yes');
                const isModerateRisk = (values.q3 === 'Yes');
                const isLowRisk = (values.q1 === 'Yes' || values.q2 === 'Yes');
                
                if (isHighRisk) {
                    riskLevel = 'High Risk';
                    riskColorClasses = ['bg-red-100', 'text-red-800'];
                } else if (isModerateRisk) {
                    riskLevel = 'Moderate Risk';
                    riskColorClasses = ['bg-orange-100', 'text-orange-800'];
                } else if (isLowRisk) {
                    riskLevel = 'Low Risk';
                    riskColorClasses = ['bg-yellow-100', 'text-yellow-800'];
                } else {
                    riskLevel = 'No Suicidal Ideation or Behavior Reported';
                    riskColorClasses = ['bg-green-100', 'text-green-800'];
                }

                // Update UI for risk level
                riskText.textContent = riskLevel;
                riskIndicator.className = 'p-4 rounded-lg text-center transition-all duration-300 ' + riskColorClasses.join(' ');
                
                // Generate output text
                const outputText = `C-SSRS Risk Assessment Summary
------------------------------------
Suicidal Ideation:
- Wish to be dead: ${values.q1}
- Suicidal thoughts: ${values.q2}
- Thoughts of a method: ${values.q3}
- Intent to act on thoughts: ${values.q4}
- Plan and intent: ${values.q5}

Suicidal Behavior:
- Preparatory acts or behavior (lifetime): ${values.q6}
- Behavior within the last 3 months: ${values.q6_followup}

Assessed Risk Level: ${riskLevel}
------------------------------------
Notes:
`;
                outputArea.value = outputText;
            }

            // Initial call to set the default state
            updateRiskLevelAndOutput();
        });
    </script>
</body>
</html>

